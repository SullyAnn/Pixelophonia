<template>
  <div>
  	<AdminHeader />
    <div id="creationContainer">
    <h1>Création des questions</h1>

    <ul class="listElements creationPage">
      <li v-for="(question, index) in questions" :key="index">

        <!-- TO DO : mise en page propre ici  -->
            <NuxtLink  :to="`./${question.id}`">
        <p> 
          <b>{{ question.label }}</b>
          <br />
          <i>{{ question.question }}</i>
          </p>
            </NuxtLink>
        <div>
        <NuxtLink :to="`${question.id}/update`">
            <button class="btn update">
              <svg class="svg-icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg">
                <path
                  d="M846.8 255L744.5 152.8c-33.1-33.1-87.9-33.1-122.5 0L149.6 625.3c-10.1 10.1-15.8 24.5-15.8 38.9L128 814v4.3c1.4 15.8 7.2 30.2 18.8 40.3 10.1 10.1 24.5 14.4 38.9 14.4h2.9l146.9-5.8c14.4 0 27.3-7.2 37.4-17.3l472.5-472.4c36-34.6 36-89.3 1.4-122.5z m-675 574.3l4.4-124.3 118.3 118.3-122.7 6z m181.1-34.5L204.7 646.7 597 254.4l148.2 148.2-392.3 392.2z m465.8-465.5l-31.5 31.4-148.4-148.2 31.6-31.4c6-6 13.5-9 21-9s15 3 21 9l106.3 106.3c11.9 11.9 11.9 29.9 0 41.9zM907.9 819.8H457.4c-16.6 0-30 13.4-30 30s13.4 30 30 30h450.5c16.6 0 30-13.4 30-30s-13.4-30-30-30zM497.9 769.6c0 16.6 13.4 30 30 30h380c16.6 0 30-13.4 30-30s-13.4-30-30-30h-380c-16.5 0-30 13.4-30 30z" />
              </svg>
            </button>
          </NuxtLink>

          <button v-on:click="deleteAQuestion(question.id)" class="btn delete">
            <svg class="svg-icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg">
              <path
                d="M850.517333 382.378667l-35.392 495.402666c-4.117333 57.6-53.333333 103.552-110.933333 103.552H319.786667c-57.706667 0-106.816-45.802667-110.933334-103.552L173.482667 382.378667A106.837333 106.837333 0 0 1 85.333333 277.333333v-42.666666a106.730667 106.730667 0 0 1 103.850667-106.624l138.005333-17.28A106.730667 106.730667 0 0 1 426.730667 42.666667h170.538666a106.858667 106.858667 0 0 1 99.52 68.117333l138.026667 17.258667A106.816 106.816 0 0 1 938.666667 234.666667v42.666666a106.730667 106.730667 0 0 1-88.149334 105.045334zM259.157333 384l34.837334 487.701333c0.938667 13.141333 12.906667 24.298667 25.813333 24.298667H704.213333c12.8 0 24.896-11.306667 25.813334-24.298667L764.842667 384H259.157333z m316.992 124.458667a42.666667 42.666667 0 1 1 85.034667 7.082666l-21.333333 256a42.666667 42.666667 0 1 1-85.034667-7.082666l21.333333-256z m-213.333333 7.082666a42.666667 42.666667 0 1 1 85.034667-7.082666l21.333333 256a42.666667 42.666667 0 1 1-85.034667 7.082666l-21.333333-256zM192.149333 213.333333C180.266667 213.333333 170.666667 222.912 170.666667 234.666667v42.666666c0 11.690667 9.642667 21.333333 21.482666 21.333334h639.701334C843.733333 298.666667 853.333333 289.088 853.333333 277.333333v-42.666666c0-11.690667-9.642667-21.333333-21.482666-21.333334a42.666667 42.666667 0 0 1-5.312-0.32l-170.496-21.333333A42.666667 42.666667 0 0 1 618.666667 149.333333c0-11.712-9.621333-21.333333-21.397334-21.333333h-170.538666A21.333333 21.333333 0 0 0 405.333333 149.333333a42.666667 42.666667 0 0 1-37.376 42.346667l-170.496 21.333333a42.666667 42.666667 0 0 1-5.312 0.32z" />
            </svg>
          </button>
        </div>

      </li>
    </ul>
    </div>

    <NuxtLink to="./add">
      <button class="btn add">
        <svg class="svg-icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg">
          <path
            d="M914.049331 467.620233 554.92923 467.620233 554.92923 108.498086c0-24.334221-19.72525-44.028772-44.031842-44.028772-24.303522 0-44.031842 19.694551-44.031842 44.028772l0 359.122147L107.743398 467.620233c-24.303522 0-44.030819 19.72832-44.030819 44.031842 0 24.337291 19.727297 44.033889 44.030819 44.033889l359.122147 0 0 359.119077c0 24.335245 19.72832 44.031842 44.031842 44.031842 24.306592 0 44.031842-19.696598 44.031842-44.031842l0-359.119077 359.120101 0c24.305569 0 44.031842-19.696598 44.031842-44.033889C958.082196 487.348554 938.354899 467.620233 914.049331 467.620233z" />
        </svg>
      </button>
    </NuxtLink>


    <NuxtLink to="../" class="creationGoBackContainer">
      <div class="goBack">
        <button class="btn back">
          <svg class="svg-icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg">
            <path
              d="M810.666667 554.666667H213.333333c-25.6 0-42.666667-17.066667-42.666666-42.666667s17.066667-42.666667 42.666666-42.666667h597.333334c25.6 0 42.666667 17.066667 42.666666 42.666667s-17.066667 42.666667-42.666666 42.666667z" />
            <path
              d="M512 853.333333c-12.8 0-21.333333-4.266667-29.866667-12.8l-298.666666-298.666666c-17.066667-17.066667-17.066667-42.666667 0-59.733334l298.666666-298.666666c17.066667-17.066667 42.666667-17.066667 59.733334 0s17.066667 42.666667 0 59.733333L273.066667 512l268.8 268.8c17.066667 17.066667 17.066667 42.666667 0 59.733333-8.533333 8.533333-17.066667 12.8-29.866667 12.8z" />
          </svg>
        </button>
        Retour
      </div>
    </NuxtLink>

  </div>
</template>

<script>
import socket from '~/plugins/socket.io.js'
import {getQuestions, deleteQuestion} from "@/assets/classes/Admin.js"
export default {
name: 'QuestionList',
created(){

console.log("heeeey")
},
async asyncData({$axios}) {
try{
const questions = await getQuestions($axios)
return {questions}
}catch(error){console.log(error)}
},
data(){
return{
listOfQuestions:[],
}
},
beforeMount(){
},
methods: {
deleteAQuestion: async function (idQuestion){
await deleteQuestion(this.$axios, idQuestion)
this.questions = await getQuestions(this.$axios) //met à jour l'affichage de la liste de question
},
back: function() {
this.$router.go("@/admin")
}
},
}
</script>